<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyPhotos</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <header>
        <h1>My Photos</h1>
    </header>
    <div class="container">
        <div id="img_unit">
        </div>
    </div>
    
        <script>
            let ajax=new XMLHttpRequest();                                              //Ajax通信を行う為のオブジェクトを作成
            ajax.open('GET','https://h2o-space.com/htmlbook/images.php');               //Ajax通信を行う為のサーバーを指定
            ajax.responseType='json';                                                   //受信するデータのタイプを指定
            ajax.send(null);                                                            //呼び出したファイルに対するリクエスト（今回は無し）
        
            ajax.onreadystatechange=function(){                                         //Ajax通信の状態を表示させる
                if (ajax.readyState === XMLHttpRequest.DONE && ajax.status === 200){    //データ通信が正常に完了した場合の処理
                    for (let i=0;i<this.response.length;i++){
                        let data=this.response[i];

                        let img=document.createElement('img');
                        img.setAttribute('src',data.path);                              //src属性に対して、data(Ajax通信で受け取ったデータ)のパスを設定

                        let caption=document.createElement('div');                      //divタグを生成
                        caption.className='inner';
                        caption.innerHTML='<p>'+data.caption+'<span>'+data.name+'</span></p>';

                        let div=document.createElement('div');
                        div.className='photo';
                        div.appendChild(img);
                        div.appendChild(caption);

                        document.getElementById('img_unit').appendChild(div);           //要素のオブジェクトを直接指定
                    }
                }                                         
            }
        </script>
        
</body>

</html>